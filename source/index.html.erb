---
title: 'ページリスト'
scripts: []
---

<button id="linkChangeTrigger">リンク先を直下に変更</button>
<% blog.articles[0...150].each_with_index do |article, i| %>
  <article class="titles">
    <h2><a class="js-pageLink" href="<%= article.url %>"><%= article.title %></a></h2>
    <p>カテゴリー：<%= article.tags[0] %></p>
    <p>ステータス：<%= article.tags[1] %></p>
    <!--<%= article.summary %>-->
  </article>
<% end %>

<script>
(function(){

  //vars
  var pageLink = document.getElementsByClassName('js-pageLink');
  var linkChangeTrigger = document.getElementById('linkChangeTrigger');
  var linkArr = [];

  //subRoutine
  function getLinkArr(){
    var linkStr = '';
    for(var i = 0, I = pageLink.length; i < I; i++ ){
      linkStr = pageLink[i].getAttribute('href');
      linkStr = linkStr.replace('html/', '');
      linkArr.push(linkStr);
    };

    return linkArr;
  };

  function setLinkArr(){
    for(var i = 0, I = pageLink.length; i < I; i++ ){
      pageLink[i].setAttribute('href', linkArr[i]);
    };

    alert('リンクの切り替え完了');
  };

  //init
  getLinkArr();

  //evemt init
  linkChangeTrigger.addEventListener('click', function(){
    setLinkArr();
  });

})();
</script>